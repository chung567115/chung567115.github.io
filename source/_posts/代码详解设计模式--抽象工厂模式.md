---
title: 抽象工厂模式
categories: 
  - 设计模式
tags:
  - Java
  - 设计模式
date: 2019-01-04 11:39:28
---

> 代码详解抽象工厂模式

<!-- more -->
# 抽象工厂模式
&emsp;&emsp;实例：除了上篇简单工厂模式画形状的功能，我们还需要给形状涂色，所以还需要有<kbd>颜色</kbd>工厂。此时我们将所有工厂抽象出来设计成<kbd>抽象工厂</kbd>，并建立一个<kbd>工厂生产器</kbd>。
- 优点：能保证客户端始终只使用某一个既定的工厂。
- 缺点：工厂扩展非常困难，要增加一个工厂，既要在抽象工厂里加代码，又要在具体工厂生产器里加代码。
![UML](https://raw.githubusercontent.com/chung567115/chung567115.github.io/hexo-blog/blog-img/抽象工厂模式.png)
```java
//形状
public interface Shape {
   void draw();
}
//圆形
public class Circle implements Shape {
   @Override
   public void draw() {
      System.out.println("画圆");
   }
}
//方形
public class Square implements Shape {
   @Override
   public void draw() {
      System.out.println("画方");
   }
}
//颜色
public interface Color {
   void fill();
}
//红色
public class Red implements Color {
   @Override
   public void fill() {
      System.out.println("涂红");
   }
}
//绿色
public class Green implements Color {
   @Override
   public void fill() {
      System.out.println("涂绿");
   }
}
//抽象工厂
public abstract class AbstractFactory {
   public abstract Color getColor(String color);
   public abstract Shape getShape(String shape) ;
}
//形状工厂
public class ShapeFactory extends AbstractFactory {
   @Override
   public Shape getShape(String shapeType){
      if(shapeType == null){
         return null;
      }        
      if(shapeType.equalsIgnoreCase("CIRCLE")){
         return new Circle();
      } else if(shapeType.equalsIgnoreCase("SQUARE")){
         return new Square();
      }
      return null;
   }
   
   @Override
   public Color getColor(String color) {
      return null;
   }
}
//颜色工厂
public class ColorFactory extends AbstractFactory {
   @Override
   public Shape getShape(String shapeType){
      return null;
   }
   
   @Override
   public Color getColor(String color) {
      if(color == null){
         return null;
      }        
      if(color.equalsIgnoreCase("RED")){
         return new Red();
      } else if(color.equalsIgnoreCase("GREEN")){
         return new Green();
      }
      return null;
   }
}
//工厂生产器
public class FactoryProducer {
   public static AbstractFactory getFactory(String choice){
      if(choice.equalsIgnoreCase("SHAPE")){
         return new ShapeFactory();
      } else if(choice.equalsIgnoreCase("COLOR")){
         return new ColorFactory();
      }
      return null;
   }
}
//使用示例
public class Demo {
   public static void main(String[] args) {
      //获取形状工厂
      AbstractFactory shapeFactory = FactoryProducer.getFactory("SHAPE");
 
      //获取形状为 Circle 的对象
      Shape shape1 = shapeFactory.getShape("CIRCLE");
      shape1.draw();
      
      //获取形状为 Square 的对象
      Shape shape2 = shapeFactory.getShape("SQUARE");
      shape2.draw();
 
      //获取颜色工厂
      AbstractFactory colorFactory = FactoryProducer.getFactory("COLOR");
 
      //获取颜色为 Red 的对象
      Color color1 = colorFactory.getColor("RED");
      color1.fill();
 
      //获取颜色为 Green 的对象
      Color color2 = colorFactory.getColor("GREEN");
      color2.fill();
   }
}
```
