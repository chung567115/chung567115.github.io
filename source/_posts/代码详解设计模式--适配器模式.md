---
title: 适配器模式
categories: 
  - 设计模式
tags:
  - Java
  - 设计模式
date: 2019-02-12 12:19:19
---

> 代码详解适配器模式

<!-- more -->
# 适配器模式
&emsp;&emsp;作为两个不兼容的接口之间的桥梁，结合了两个独立接口的功能。

- 优点
1. 可以让任何两个没有关联的类一起运行。
2. 提高了类的复用。
3. 增加了类的透明度。
4. 灵活性好。

- 缺点
5. 过多地使用适配器，会让系统非常零乱，不易整体进行把握。

![UML](https://raw.githubusercontent.com/chung567115/chung567115.github.io/hexo-blog/blog-img/适配器模式.png)

```java
// 播放器接口
public interface MediaPlayer {
   public void play(String audioType, String fileName);
}

// 拓展播放器接口
public interface AdvancedMediaPlayer { 
   public void playFlv(String fileName);
   public void playMp4(String fileName);
}

// FLV播放器
public class FlvPlayer implements AdvancedMediaPlayer{
   @Override
   public void playFlv(String fileName) {
      System.out.println("播放FLV文件: "+ fileName);      
   }
 
   @Override
   public void playMp4(String fileName) {
      //什么也不做
   }
}

// MP4播放器
public class Mp4Player implements AdvancedMediaPlayer{
   @Override
   public void playFlv(String fileName) {
      //什么也不做
   }
 
   @Override
   public void playMp4(String fileName) {
      System.out.println("播放MP4文件: "+ fileName);      
   }
}

// 播放器适配器
public class MediaAdapter implements MediaPlayer {
   AdvancedMediaPlayer advancedMusicPlayer;
 
   public MediaAdapter(String audioType){
      if(audioType.equalsIgnoreCase("FLV") ){
         advancedMusicPlayer = new FlvPlayer();       
      } else if (audioType.equalsIgnoreCase("MP4")){
         advancedMusicPlayer = new Mp4Player();
      }  
   }
 
   @Override
   public void play(String audioType, String fileName) {
      if(audioType.equalsIgnoreCase("FLV")){
         advancedMusicPlayer.playFlv(fileName);
      } else if(audioType.equalsIgnoreCase("MP4")){
         advancedMusicPlayer.playMp4(fileName);
      }
   }
}

// 音频播放器
public class AudioPlayer implements MediaPlayer {
   MediaAdapter mediaAdapter; 
 
   @Override
   public void play(String audioType, String fileName) {
      // mediaAdapter 提供了播放其他文件格式的支持
      if(audioType.equalsIgnoreCase("FLV") || audioType.equalsIgnoreCase("MP4")){
         mediaAdapter = new MediaAdapter(audioType);
         mediaAdapter.play(audioType, fileName);
      } else if(audioType.equalsIgnoreCase("MP3")){
         // 内置支持MP3文件
         System.out.println("播放MP3文件: "+ fileName); 
      } else{
         System.out.println("不支持文件格式：" + audioType);
      }
   }   
}

// 使用示例
public class Demo {
   public static void main(String[] args) {
      AudioPlayer audioPlayer = new AudioPlayer();
      audioPlayer.play("mp3", "a.mp3");
      audioPlayer.play("mp4", "b.mp4");
      audioPlayer.play("flv", "c.flv");
      audioPlayer.play("avi", "d.avi");
   }
}
```
