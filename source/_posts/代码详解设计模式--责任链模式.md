---
title: 责任链模式
categories: 
  - 设计模式
tags:
  - Java
  - 设计模式
date: 2019-03-01 13:52:41
---

> 代码详解责任链模式

<!-- more -->
# 责任链模式
&emsp;&emsp;<kbd>责任链模式</kbd>为请求创建了一个接收者对象的链。这种模式给予请求的类型，对请求的发送者和接收者进行解耦。

- 优点
1. 降低耦合度。它将请求的发送者和接收者解耦；
2. 简化了对象。使得对象不需要知道链的结构；
3. 增强给对象指派职责的灵活性。通过改变链内的成员或者调动它们的次序，允许动态地新增或者删除责任；
4. 增加新的请求处理类很方便。

- 缺点
1. 不能保证请求一定被接收；
2. 系统性能将受到一定影响，而且在进行代码调试时不太方便，可能会造成循环调用；
3. 可能不容易观察运行时的特征，有碍于除错。

![UML](https://raw.githubusercontent.com/chung567115/chung567115.github.io/hexo-blog/blog-img/责任链模式.png)

```java
// 记录器抽象类
public abstract class AbstractLogger {
   public static int INFO = 1;
   public static int WARN = 2;
   public static int ERROR = 3;
   protected int level;
 
   //责任链中的下一个元素
   protected AbstractLogger nextLogger;
 
   public void setNextLogger(AbstractLogger nextLogger){
      this.nextLogger = nextLogger;
   }
 
   public void logMessage(int level, String message){
      if(this.level <= level){
         write(message);
      }
      if(nextLogger != null){
         nextLogger.logMessage(level, message);
      }
   }
   abstract protected void write(String message);
}

// 信息打印器
public class InfoLogger extends AbstractLogger {
   public InfoLogger(int level){
      this.level = level;
   }
 
   @Override
   protected void write(String message) {    
      System.out.println("INFO: " + message);
   }
}

// 警告打印器
public class WarnLogger extends AbstractLogger {
   public WarnLogger(int level){
      this.level = level;
   }
 
   @Override
   protected void write(String message) {    
      System.out.println("WARN: " + message);
   }
}

// 错误打印器
public class ErrorLogger extends AbstractLogger {
   public ErrorLogger(int level){
      this.level = level;
   }
 
   @Override
   protected void write(String message) {    
      System.out.println("ERROR: " + message);
   }
}

// 使用示例
public class Demo {
   private static AbstractLogger getChainOfLoggers(){
      AbstractLogger infoLogger = new ConsoleLogger(AbstractLogger.INFO);
      AbstractLogger warnLogger = new WarnLogger(AbstractLogger.WARN);
      AbstractLogger errorLogger = new ErrorLogger(AbstractLogger.ERROR);
      errorLogger.setNextLogger(warnLogger);
      warnLogger.setNextLogger(infoLogger);
      return errorLogger;    
   }
 
   public static void main(String[] args) {
      AbstractLogger loggerChain = getChainOfLoggers();
      loggerChain.logMessage(AbstractLogger.INFO, "信息日志");
      loggerChain.logMessage(AbstractLogger.WARN, "警告日志");
      loggerChain.logMessage(AbstractLogger.ERROR, "错误日志");
   }
}
```
